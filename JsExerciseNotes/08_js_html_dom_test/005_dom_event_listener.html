<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../CSSCodeBase/array.css">
    <title>Document</title>
</head>
<body>
    <div>
        <div><h1>JavaScript HTML DOM EventListener</h1></div>
        <div>
            <h3>addEventListener() 方法</h3>
            <p>addEventListener() 方法向指定元素添加一个事件处理程序，或向多个事件添加事件处理程序。</p>
            <p>addEventListener() 方法的语法：</p>
            <p>element.addEventListener(event, function, useCapture)</p>
            <p>第一个参数是类型，比如：click、mousedown（string 类型，不用加on）</p>
            <p>第二个参数是事件处理程序，事件触发后执行的程序（function 类型）</p>
            <p>第三个参数是布尔值，指定事件是否在捕获或冒泡阶段执行（boolean 类型）可选参数</p>
        </div>
        <div>
            <h3>向原元素添加事件句柄</h3>
            <p>在HTML中，事件句柄是指在HTML中定义的函数，当事件发生时，函数将被调用。</p>
            <p>当用户点击按钮弹出“Hello World”</p>
            <button id="Btn1">点我</button>
            <script>
                document.getElementById("Btn1").addEventListener("click",function(){
                    alert("Hello World");
                })
            </script>
        </div>
        <div>
            <h3>向同一个元素添加多个事件句柄</h3>
            <p>addEventListener允许向同一个元素添加多个事件，且不会覆盖已存在的事件</p>
            <p>当用户点击按钮改变标题颜色</p>
            <button id="Btn2">点我</button>
            <script>
                var btn = document.getElementById("Btn2");
                btn.addEventListener("click",function(){
                    btn.style.color = "red";
                });
                setTimeout(
                    function(){
                        btn.addEventListener("click",function(){
                            btn.style.color = "blue";
                        });
                    }
                , 3000)
            </script>
            <p>也可以添加不同的事件,鼠标移入和移出</p>
            <div id="Btn3" style="width: 100px;height: 20px;padding: 40px;">移动鼠标看看</div>
            <script>
                var btn1 = document.getElementById("Btn3");
                btn1.addEventListener("mouseout",function(){
                    btn1.style.backgroundColor = "red";
                })
                btn1.addEventListener("mousemove",function(){
                    btn1.style.backgroundColor = "blue";
                })
            </script>
        </div>
        <div>
            <h3>向window 对象添加事件句柄</h3>
            <p>window对象是全局对象，在HTML中，window对象是document对象的一个属性</p>
            <p>当用户重置窗口大小，添加监听事件</p>
            <script>
                window.addEventListener("resize",function(){
                    alert("窗口大小发生变化");
                })
            </script>
        </div>
        <div>
            <h3>参数传递</h3>
            <p>使用匿名函数传递参数</p>
            <button id="Btn4">点我显示计算结果</button>
            <p id="result"></p>
            <script>
                var p1, p2;
                p1 = 3;
                p2 = 5;
                function add(a, b){
                    var result = a + b;
                    document.getElementById("result").innerHTML = result;
                }
                document.getElementById("Btn4").addEventListener("click",function(){
                    add(p1, p2);
                })
            </script>
        </div>
        <div>
            <h3>事件冒泡或事件捕获</h3>
            <p>事件传递有两种方式</p>
            <p>事件冒泡：事件从最具体的元素开始触发，然后逐级向上传播到最不具体的元素</p>
            <p>比如在p元素插入到div中，则p元素的click先被触发，接着是div，逐级向上</p>
            <p>事件捕获：事件从最不具体的元素开始触发，然后逐级向下传播到最具体的元素</p>
            <p>外部元素的事件会先被触发，然后才会触发内部元素的事件，即： div 元素的点击事件先触发 ，然后再触发 p 元素的点击事件。</p>
            <p>addEventListener() 方法可以指定 "useCapture" 参数来设置传递类型,参数类型 布尔值</p>
            <p>默认值为 false, 即冒泡传递，当值为 true 时, 事件使用捕获传递。</p>
            <div id="div5" style="width: 100px;height: 20px;padding: 40px;"> 
                <p id="p5">事件冒泡</p>
            </div>
            <div id="div6" style="width: 100px;height: 20px;padding: 40px;"> 
                <p id="p6">事件捕获</p>
            </div>
            <script>
                document.getElementById("p5").addEventListener("click",function(){
                    alert("事件冒泡p元素")
                }, false)
                document.getElementById("div5").addEventListener("click",function(){
                    alert("事件冒泡div")
                }, false)
                document.getElementById("p6").addEventListener("click",function(){
                    alert("事件捕获p元素")
                }, true)
                document.getElementById("div6").addEventListener("click",function(){
                    alert("事件捕获div")
                }, true)
            </script>
        </div>
    </div>
</body>
</html>